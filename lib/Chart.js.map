{"version":3,"sources":["../../src/lib/Chart.js"],"names":["Chart","props","context","yScale","bind","listener","id","subscribe","unsubscribe","type","moreProps","state","e","onContextMenu","currentCharts","indexOf","chartConfig","each","copy","chartId","origin","x","y","children","PureComponent","propTypes","height","PropTypes","number","oneOfType","array","func","string","isRequired","yExtents","yExtentsCalculator","propName","componentName","Error","flipYScale","bool","padding","shape","top","bottom","node","defaultProps","yPan","yPanEnabled","noop","contextTypes","childContextTypes","object"],"mappings":";;;;;;;;;;AACA;;;;AACA;;;;AACA;;AAEA;;;;AACA;;;;;;;;;;IAMMA,K;;;AACL,gBAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA,4GACrBD,KADqB,EACdC,OADc;;AAE3B,QAAKC,MAAL,GAAc,MAAKA,MAAL,CAAYC,IAAZ,OAAd;AACA,QAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcD,IAAd,OAAhB;AAH2B;AAI3B;;;;8CAC2B;AAAA,OACnBE,EADmB,GACZ,KAAKL,KADO,CACnBK,EADmB;AAAA,OAEnBC,SAFmB,GAEL,KAAKL,OAFA,CAEnBK,SAFmB;;AAG3BA,aAAU,WAAWD,EAArB,EACC;AACCD,cAAU,KAAKA;AADhB,IADD;AAKA;;;yCACsB;AAAA,OACdC,EADc,GACP,KAAKL,KADE,CACdK,EADc;AAAA,OAEdE,WAFc,GAEE,KAAKN,OAFP,CAEdM,WAFc;;AAGtBA,eAAY,WAAWF,EAAvB;AACA;;;2BACQG,I,EAAMC,S,EAAWC,K,EAAOC,C,EAAG;AAAA,gBACL,KAAKX,KADA;AAAA,OAC3BK,EAD2B,UAC3BA,EAD2B;AAAA,OACvBO,aADuB,UACvBA,aADuB;;;AAGnC,OAAIJ,SAAS,aAAb,EAA4B;AAAA,QACnBK,aADmB,GACDJ,SADC,CACnBI,aADmB;;AAE3B,QAAIA,cAAcC,OAAd,CAAsBT,EAAtB,IAA4B,CAAC,CAAjC,EAAoC;AACnCO,mBAAcH,SAAd,EAAyBE,CAAzB;AACA;AACD;AACD;;;2BACQ;AAAA;;AACR,OAAMI,cAAc,iBAAK,KAAKd,OAAL,CAAac,WAAlB,EAA+B;AAAA,WAAQC,KAAKX,EAAL,KAAY,OAAKL,KAAL,CAAWK,EAA/B;AAAA,IAA/B,CAApB;AACA,UAAOU,YAAYb,MAAZ,CAAmBe,IAAnB,EAAP;AACA;;;oCACiB;AAAA,OACLC,OADK,GACO,KAAKlB,KADZ,CACTK,EADS;;AAEjB,OAAMU,cAAc,iBAAK,KAAKd,OAAL,CAAac,WAAlB,EAA+B;AAAA,WAAQC,KAAKX,EAAL,KAAYa,OAApB;AAAA,IAA/B,CAApB;;AAEA,UAAO;AACNA,oBADM;AAENH;AAFM,IAAP;AAIA;;;2BACQ;AAAA;;AAAA,eACW,iBAAK,KAAKd,OAAL,CAAac,WAAlB,EAA+B;AAAA,WAAQC,KAAKX,EAAL,KAAY,OAAKL,KAAL,CAAWK,EAA/B;AAAA,IAA/B,CADX;AAAA,OACAc,MADA,SACAA,MADA;;AAAA,gCAEOA,MAFP;AAAA,OAEDC,CAFC;AAAA,OAEEC,CAFF;;AAIR,UAAO;AAAA;AAAA,MAAG,0BAAyBD,CAAzB,UAAiCC,CAAjC,MAAH;AAA4C,SAAKrB,KAAL,CAAWsB;AAAvD,IAAP;AACA;;;;EAhDkBC,uB;;AAmDpBxB,MAAMyB,SAAN,GAAkB;AACjBC,SAAQC,oBAAUC,MADD;AAEjBR,SAAQO,oBAAUE,SAAV,CAAoB,CAC3BF,oBAAUG,KADiB,EAE3BH,oBAAUI,IAFiB,CAApB,CAFS;AAMjBzB,KAAIqB,oBAAUE,SAAV,CAAoB,CAACF,oBAAUC,MAAX,EAAmBD,oBAAUK,MAA7B,CAApB,EAA0DC,UAN7C;AAOjBC,WAAUP,oBAAUE,SAAV,CAAoB,CAC7BF,oBAAUG,KADmB,EAE7BH,oBAAUI,IAFmB,CAApB,CAPO;AAWjBI,qBAAoB,4BAASlC,KAAT,EAAgBmC,QAAhB,EAA0BC,aAA1B,EAAyC;AAC5D,MAAI,yBAAapC,MAAMiC,QAAnB,KAAgC,OAAOjC,MAAMkC,kBAAb,KAAoC,UAAxE,EACC,OAAO,IAAIG,KAAJ,CAAU,6DACID,aADJ,0BAAV,CAAP;AAED,EAfgB;AAgBjBxB,gBAAec,oBAAUI,IAhBR;AAiBjB5B,SAAQwB,oBAAUI,IAjBD;;AAmBjBQ,aAAYZ,oBAAUa,IAnBL;AAoBjBC,UAASd,oBAAUE,SAAV,CAAoB,CAC5BF,oBAAUC,MADkB,EAE5BD,oBAAUe,KAAV,CAAgB;AACfC,OAAKhB,oBAAUC,MADA;AAEfgB,UAAQjB,oBAAUC;AAFH,EAAhB,CAF4B,CAApB,CApBQ;AA2BjBL,WAAUI,oBAAUkB;AA3BH,CAAlB;;AA8BA7C,MAAM8C,YAAN,GAAqB;AACpBxC,KAAI,CADgB;AAEpBc,SAAQ,CAAC,CAAD,EAAI,CAAJ,CAFY;AAGpBqB,UAAS,CAHW;AAIpBtC,SAAQ,2BAJY;AAKpBoC,aAAY,KALQ;AAMpBQ,OAAM,IANc;AAOpBC,cAAa,KAPO;AAQpBnC,gBAAeoC;AARK,CAArB;;AAWAjD,MAAMkD,YAAN,GAAqB;AACpBlC,cAAaW,oBAAUG,KADH;AAEpBvB,YAAWoB,oBAAUI,IAAV,CAAeE,UAFN;AAGpBzB,cAAamB,oBAAUI,IAAV,CAAeE;AAHR,CAArB;;AAMAjC,MAAMmD,iBAAN,GAA0B;AACzBnC,cAAaW,oBAAUyB,MAAV,CAAiBnB,UADL;AAEzBd,UAASQ,oBAAUE,SAAV,CAAoB,CAACF,oBAAUC,MAAX,EAAmBD,oBAAUK,MAA7B,CAApB,EAA0DC;AAF1C,CAA1B;;kBAKejC,K","file":"Chart.js","sourcesContent":["\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { scaleLinear } from \"d3-scale\";\r\n\r\nimport PureComponent from \"./utils/PureComponent\";\r\nimport {\r\n\tisNotDefined,\r\n\tnoop,\r\n\tfind,\r\n} from \"./utils\";\r\n\r\nclass Chart extends PureComponent {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\t\tthis.yScale = this.yScale.bind(this);\r\n\t\tthis.listener = this.listener.bind(this);\r\n\t}\r\n\tUNSAFE_componentWillMount() {\r\n\t\tconst { id } = this.props;\r\n\t\tconst { subscribe } = this.context;\r\n\t\tsubscribe(\"chart_\" + id,\r\n\t\t\t{\r\n\t\t\t\tlistener: this.listener,\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tconst { id } = this.props;\r\n\t\tconst { unsubscribe } = this.context;\r\n\t\tunsubscribe(\"chart_\" + id);\r\n\t}\r\n\tlistener(type, moreProps, state, e) {\r\n\t\tconst { id, onContextMenu } = this.props;\r\n\r\n\t\tif (type === \"contextmenu\") {\r\n\t\t\tconst { currentCharts } = moreProps;\r\n\t\t\tif (currentCharts.indexOf(id) > -1) {\r\n\t\t\t\tonContextMenu(moreProps, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tyScale() {\r\n\t\tconst chartConfig = find(this.context.chartConfig, each => each.id === this.props.id);\r\n\t\treturn chartConfig.yScale.copy();\r\n\t}\r\n\tgetChildContext() {\r\n\t\tconst { id: chartId } = this.props;\r\n\t\tconst chartConfig = find(this.context.chartConfig, each => each.id === chartId);\r\n\r\n\t\treturn {\r\n\t\t\tchartId,\r\n\t\t\tchartConfig,\r\n\t\t};\r\n\t}\r\n\trender() {\r\n\t\tconst { origin } = find(this.context.chartConfig, each => each.id === this.props.id);\r\n\t\tconst [x, y] = origin;\r\n\r\n\t\treturn <g transform={`translate(${ x }, ${ y })`}>{this.props.children}</g>;\r\n\t}\r\n}\r\n\r\nChart.propTypes = {\r\n\theight: PropTypes.number,\r\n\torigin: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.func\r\n\t]),\r\n\tid: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n\tyExtents: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.func\r\n\t]),\r\n\tyExtentsCalculator: function(props, propName, componentName) {\r\n\t\tif (isNotDefined(props.yExtents) && typeof props.yExtentsCalculator !== \"function\")\r\n\t\t\treturn new Error(\"yExtents or yExtentsCalculator must\"\r\n\t\t\t\t+ ` be present on ${componentName}. Validation failed.`);\r\n\t},\r\n\tonContextMenu: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\r\n\tflipYScale: PropTypes.bool,\r\n\tpadding: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.shape({\r\n\t\t\ttop: PropTypes.number,\r\n\t\t\tbottom: PropTypes.number,\r\n\t\t})\r\n\t]),\r\n\tchildren: PropTypes.node,\r\n};\r\n\r\nChart.defaultProps = {\r\n\tid: 0,\r\n\torigin: [0, 0],\r\n\tpadding: 0,\r\n\tyScale: scaleLinear(),\r\n\tflipYScale: false,\r\n\tyPan: true,\r\n\tyPanEnabled: false,\r\n\tonContextMenu: noop,\r\n};\r\n\r\nChart.contextTypes = {\r\n\tchartConfig: PropTypes.array,\r\n\tsubscribe: PropTypes.func.isRequired,\r\n\tunsubscribe: PropTypes.func.isRequired,\r\n};\r\n\r\nChart.childContextTypes = {\r\n\tchartConfig: PropTypes.object.isRequired,\r\n\tchartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n};\r\n\r\nexport default Chart;\r\n"]}