{"version":3,"sources":["../../../src/lib/GenericComponent.js"],"names":["React","Component","PropTypes","isNotDefined","isDefined","noop","functor","identity","aliases","mouseleave","panend","pinchzoom","mousedown","click","contextmenu","dblclick","dragstart","dragend","dragcancel","GenericComponent","props","context","drawOnCanvas","bind","getMoreProps","listener","draw","updateMoreProps","evaluateType","isHover","preCanvasDraw","postCanvasDraw","getPanConditions","shouldTypeProceed","preEvaluate","generateSubscriptionId","suscriberId","moreProps","state","updateCount","Object","keys","forEach","key","type","e","evaluationInProgress","newType","proceed","drawOn","indexOf","onContextMenu","hovering","onContextMenuWhenHover","onMouseDown","onClickWhenHover","onClickOutside","onClick","prevHover","amIOnTop","setCursorClass","selected","onHover","iSetTheCursorClass","interactiveCursorClass","onUnHover","onMouseMove","onDoubleClick","onDoubleClickWhenHover","onPan","onPanEnd","dragInProgress","onDragStart","someDragInProgress","onDrag","onDragComplete","draggable","panEnabled","disablePan","force","trigger","chartCanvasType","canvasDraw","setState","subscribe","chartId","clip","edgeClip","componentWillReceiveProps","unsubscribe","componentDidUpdate","prevProps","nextProps","nextContext","xScale","plotData","chartConfig","getMutableState","debug","morePropsDecorator","xAccessor","displayXAccessor","width","height","fullData","canvasToDraw","getCanvasContexts","ctx","svgDraw","suffix","style","propTypes","func","isRequired","array","bool","string","defaultProps","contexts","mouseCoord","contextTypes","number","margin","object","oneOfType","getAxisCanvas","axes","getMouseCanvas"],"mappings":"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","file":"GenericComponent.js","sourcesContent":["\"use strict\";\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport {\r\n\tisNotDefined,\r\n\tisDefined,\r\n\tnoop,\r\n\tfunctor,\r\n\tidentity,\r\n} from \"./utils\";\r\n\r\nconst aliases = {\r\n\tmouseleave: \"mousemove\", // to draw interactive after mouse exit\r\n\tpanend: \"pan\",\r\n\tpinchzoom: \"pan\",\r\n\tmousedown: \"mousemove\",\r\n\tclick: \"mousemove\",\r\n\tcontextmenu: \"mousemove\",\r\n\tdblclick: \"mousemove\",\r\n\tdragstart: \"drag\",\r\n\tdragend: \"drag\",\r\n\tdragcancel: \"drag\",\r\n};\r\n\r\nclass GenericComponent extends Component {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t\tthis.getMoreProps = this.getMoreProps.bind(this);\r\n\t\tthis.listener = this.listener.bind(this);\r\n\t\tthis.draw = this.draw.bind(this);\r\n\t\tthis.updateMoreProps = this.updateMoreProps.bind(this);\r\n\t\tthis.evaluateType = this.evaluateType.bind(this);\r\n\t\tthis.isHover = this.isHover.bind(this);\r\n\t\tthis.preCanvasDraw = this.preCanvasDraw.bind(this);\r\n\t\tthis.postCanvasDraw = this.postCanvasDraw.bind(this);\r\n\t\tthis.getPanConditions = this.getPanConditions.bind(this);\r\n\t\tthis.shouldTypeProceed = this.shouldTypeProceed.bind(this);\r\n\t\tthis.preEvaluate = this.preEvaluate.bind(this);\r\n\r\n\t\tconst { generateSubscriptionId } = context;\r\n\t\tthis.suscriberId = generateSubscriptionId();\r\n\r\n\t\tthis.moreProps = {};\r\n\r\n\t\tthis.state = {\r\n\t\t\tupdateCount: 0,\r\n\t\t};\r\n\t}\r\n\tupdateMoreProps(moreProps) {\r\n\t\tObject.keys(moreProps).forEach(key => {\r\n\t\t\tthis.moreProps[key] = moreProps[key];\r\n\t\t});\r\n\t}\r\n\tshouldTypeProceed() {\r\n\t\treturn true;\r\n\t}\r\n\tpreEvaluate() {\r\n\t}\r\n\tlistener(type, moreProps, state, e) {\r\n\t\t// console.log(e.shiftKey)\r\n\t\tif (isDefined(moreProps)) {\r\n\t\t\tthis.updateMoreProps(moreProps);\r\n\t\t}\r\n\t\tthis.evaluationInProgress = true;\r\n\t\tthis.evaluateType(type, e);\r\n\t\tthis.evaluationInProgress = false;\r\n\t}\r\n\tevaluateType(type, e) {\r\n\t\tconst newType = aliases[type] || type;\r\n\t\tconst proceed = this.props.drawOn.indexOf(newType) > -1;\r\n\r\n\t\t// console.log(\"type ->\", type, proceed);\r\n\r\n\t\tif (!proceed) return;\r\n\t\t// const moreProps = this.getMoreProps();\r\n\t\tthis.preEvaluate(type, this.moreProps, e);\r\n\t\tif (!this.shouldTypeProceed(type, this.moreProps)) return;\r\n\r\n\t\tswitch (type) {\r\n\t\tcase \"zoom\":\r\n\t\tcase \"mouseenter\":\r\n\t\t\t// DO NOT DRAW FOR THESE EVENTS\r\n\t\t\tbreak;\r\n\t\tcase \"mouseleave\":\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"contextmenu\": {\r\n\t\t\tif (this.props.onContextMenu) {\r\n\t\t\t\tthis.props.onContextMenu(this.getMoreProps(), e);\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\tthis.moreProps.hovering\r\n\t\t\t\t&& this.props.onContextMenuWhenHover\r\n\t\t\t) {\r\n\t\t\t\tthis.props.onContextMenuWhenHover(this.getMoreProps(), e);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"mousedown\": {\r\n\t\t\tif (this.props.onMouseDown) {\r\n\t\t\t\tthis.props.onMouseDown(this.getMoreProps(), e);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"click\": {\r\n\t\t\tconst moreProps = this.getMoreProps();\r\n\t\t\tif (this.moreProps.hovering) {\r\n\t\t\t\t// console.error(\"TODO use this only for SAR, Line series\")\r\n\t\t\t\tthis.props.onClickWhenHover(moreProps, e);\r\n\t\t\t} else {\r\n\t\t\t\tthis.props.onClickOutside(moreProps, e);\r\n\t\t\t}\r\n\t\t\tif (this.props.onClick) {\r\n\t\t\t\tthis.props.onClick(moreProps, e);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"mousemove\": {\r\n\r\n\t\t\tconst prevHover = this.moreProps.hovering;\r\n\t\t\tthis.moreProps.hovering = this.isHover(e);\r\n\r\n\t\t\tconst { amIOnTop, setCursorClass } = this.context;\r\n\r\n\t\t\tif (this.moreProps.hovering\r\n\t\t\t\t\t&& !this.props.selected\r\n\t\t\t\t\t&& !prevHover\r\n\t\t\t\t\t&& isDefined(this.props.onHover)) {\r\n\t\t\t\tsetCursorClass(\"react-stockcharts-pointer-cursor\");\r\n\t\t\t\tthis.iSetTheCursorClass = true;\r\n\t\t\t} else if (this.moreProps.hovering\r\n\t\t\t\t\t&& this.props.selected\r\n\t\t\t\t\t&& amIOnTop(this.suscriberId)) {\r\n\t\t\t\tsetCursorClass(this.props.interactiveCursorClass);\r\n\t\t\t\tthis.iSetTheCursorClass = true;\r\n\t\t\t} else if (prevHover\r\n\t\t\t\t\t&& !this.moreProps.hovering\r\n\t\t\t\t\t&& this.iSetTheCursorClass) {\r\n\t\t\t\tthis.iSetTheCursorClass = false;\r\n\t\t\t\tsetCursorClass(null);\r\n\t\t\t}\r\n\t\t\tconst moreProps = this.getMoreProps();\r\n\r\n\t\t\tif (this.moreProps.hovering && !prevHover) {\r\n\t\t\t\tif (this.props.onHover) {\r\n\t\t\t\t\tthis.props.onHover(moreProps, e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (prevHover && !this.moreProps.hovering) {\r\n\t\t\t\tif (this.props.onUnHover) {\r\n\t\t\t\t\tthis.props.onUnHover(moreProps, e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.props.onMouseMove) {\r\n\t\t\t\tthis.props.onMouseMove(moreProps, e);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"dblclick\": {\r\n\t\t\tconst moreProps = this.getMoreProps();\r\n\r\n\t\t\tif (this.props.onDoubleClick) {\r\n\t\t\t\tthis.props.onDoubleClick(moreProps, e);\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\tthis.moreProps.hovering\r\n\t\t\t\t&& this.props.onDoubleClickWhenHover\r\n\t\t\t) {\r\n\t\t\t\tthis.props.onDoubleClickWhenHover(moreProps, e);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"pan\": {\r\n\t\t\tthis.moreProps.hovering = false;\r\n\t\t\tif (this.props.onPan) {\r\n\t\t\t\tthis.props.onPan(this.getMoreProps(), e);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"panend\": {\r\n\t\t\tif (this.props.onPanEnd) {\r\n\t\t\t\tthis.props.onPanEnd(this.getMoreProps(), e);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"dragstart\": {\r\n\t\t\tif (this.moreProps.hovering && this.props.selected) {\r\n\t\t\t\tconst { amIOnTop } = this.context;\r\n\t\t\t\tif (amIOnTop(this.suscriberId)) {\r\n\t\t\t\t\tthis.dragInProgress = true;\r\n\t\t\t\t\tthis.props.onDragStart(this.getMoreProps(), e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.someDragInProgress = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"drag\": {\r\n\t\t\tif (this.dragInProgress && this.props.onDrag) {\r\n\t\t\t\tthis.props.onDrag(this.getMoreProps(), e);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"dragend\": {\r\n\t\t\tif (this.dragInProgress && this.props.onDragComplete) {\r\n\t\t\t\tthis.props.onDragComplete(this.getMoreProps(), e);\r\n\t\t\t}\r\n\t\t\tthis.dragInProgress = false;\r\n\t\t\tthis.someDragInProgress = false;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"dragcancel\": {\r\n\t\t\tif (this.dragInProgress || this.iSetTheCursorClass) {\r\n\t\t\t\tconst { setCursorClass } = this.context;\r\n\t\t\t\tsetCursorClass(null);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t}\r\n\t}\r\n\tisHover(e) {\r\n\t\treturn isDefined(this.props.isHover)\r\n\t\t\t? this.props.isHover(this.getMoreProps(), e)\r\n\t\t\t: false;\r\n\t}\r\n\tgetPanConditions() {\r\n\t\tconst draggable = !!(this.props.selected\r\n\t\t\t&& this.moreProps.hovering);\r\n\r\n\t\treturn {\r\n\t\t\tdraggable,\r\n\t\t\tpanEnabled: !this.props.disablePan,\r\n\t\t};\r\n\t}\r\n\tdraw({ trigger, force } = { force: false }) {\r\n\t\tconst type = aliases[trigger] || trigger;\r\n\t\tconst proceed = this.props.drawOn.indexOf(type) > -1;\r\n\r\n\t\tif (proceed\r\n\t\t\t|| this.props.selected /* this is to draw as soon as you select */\r\n\t\t\t|| force\r\n\t\t) {\r\n\t\t\tconst { chartCanvasType } = this.context;\r\n\t\t\tconst { canvasDraw } = this.props;\r\n\r\n\t\t\tif (isNotDefined(canvasDraw) || chartCanvasType === \"svg\") {\r\n\t\t\t\tconst { updateCount } = this.state;\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tupdateCount: updateCount + 1,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.drawOnCanvas();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\tconst { subscribe, chartId } = this.context;\r\n\t\tconst { clip, edgeClip } = this.props;\r\n\r\n\t\tsubscribe(this.suscriberId,\r\n\t\t\t{\r\n\t\t\t\tchartId, clip, edgeClip,\r\n\t\t\t\tlistener: this.listener,\r\n\t\t\t\tdraw: this.draw,\r\n\t\t\t\tgetPanConditions: this.getPanConditions,\r\n\t\t\t}\r\n\t\t);\r\n\t\tthis.componentWillReceiveProps(this.props, this.context);\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tconst { unsubscribe } = this.context;\r\n\t\tunsubscribe(this.suscriberId);\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.componentDidUpdate(this.props);\r\n\t}\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { chartCanvasType } = this.context;\r\n\t\tconst { canvasDraw, selected, interactiveCursorClass } = this.props;\r\n\r\n\t\tif (prevProps.selected !== selected) {\r\n\t\t\tconst { setCursorClass } = this.context;\r\n\t\t\tsetCursorClass((selected && this.moreProps.hovering)\r\n\t\t\t\t? interactiveCursorClass\r\n\t\t\t\t: null);\r\n\t\t}\r\n\t\tif (isDefined(canvasDraw)\r\n\t\t\t\t&& !this.evaluationInProgress\r\n\t\t\t\t// && !(this.someDragInProgress && this.props.selected)\r\n\t\t\t\t/*\r\n\t\t\t\tprevent double draw of interactive elements\r\n\t\t\t\tduring dragging / hover / click etc.\r\n\t\t\t\t*/\r\n\t\t\t\t&& chartCanvasType !== \"svg\") {\r\n\t\t\tthis.drawOnCanvas();\r\n\t\t}\r\n\t}\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tconst { xScale, plotData, chartConfig, getMutableState } = nextContext;\r\n\r\n\t\tthis.props.debug(nextContext);\r\n\t\tthis.moreProps = {\r\n\t\t\t...this.moreProps,\r\n\t\t\t...getMutableState(),\r\n\t\t\t/*\r\n\t\t\t^ this is so\r\n\t\t\tmouseXY, currentCharts, currentItem are available to\r\n\t\t\tnewly created components like MouseHoverText which\r\n\t\t\tis created right after a new interactive object is drawn\r\n\t\t\t*/\r\n\t\t\txScale, plotData, chartConfig\r\n\t\t};\r\n\t}\r\n\tgetMoreProps() {\r\n\t\tconst {\r\n\t\t\txScale,\r\n\t\t\tplotData,\r\n\t\t\tchartConfig,\r\n\t\t\tmorePropsDecorator,\r\n\t\t\txAccessor,\r\n\t\t\tdisplayXAccessor,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t} = this.context;\r\n\r\n\t\tconst { chartId, fullData } = this.context;\r\n\r\n\t\tconst moreProps = {\r\n\t\t\txScale, plotData, chartConfig,\r\n\t\t\txAccessor, displayXAccessor,\r\n\t\t\twidth, height,\r\n\t\t\tchartId,\r\n\t\t\tfullData,\r\n\t\t\t...this.moreProps,\r\n\t\t};\r\n\r\n\t\treturn (morePropsDecorator || identity)(moreProps);\r\n\t}\r\n\tpreCanvasDraw() {\r\n\t\t// do nothing\r\n\t}\r\n\tpostCanvasDraw() {\r\n\t}\r\n\tdrawOnCanvas() {\r\n\t\tconst { canvasDraw, canvasToDraw } = this.props;\r\n\t\tconst { getCanvasContexts } = this.context;\r\n\r\n\t\tconst moreProps = this.getMoreProps();\r\n\r\n\t\tconst ctx = canvasToDraw(getCanvasContexts());\r\n\r\n\t\tthis.preCanvasDraw(ctx, moreProps);\r\n\t\tcanvasDraw(ctx, moreProps);\r\n\t\tthis.postCanvasDraw(ctx, moreProps);\r\n\t}\r\n\trender() {\r\n\t\tconst { chartCanvasType, chartId } = this.context;\r\n\t\tconst { canvasDraw, clip, svgDraw } = this.props;\r\n\r\n\t\tif (isDefined(canvasDraw) && chartCanvasType !== \"svg\") {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst suffix = isDefined(chartId) ? \"-\" + chartId : \"\";\r\n\r\n\t\tconst style = clip ? { \"clipPath\": `url(#chart-area-clip${suffix})` } : null;\r\n\r\n\t\treturn <g style={style}>{svgDraw(this.getMoreProps())}</g>;\r\n\t}\r\n}\r\n\r\nGenericComponent.propTypes = {\r\n\tsvgDraw: PropTypes.func.isRequired,\r\n\tcanvasDraw: PropTypes.func,\r\n\r\n\tdrawOn: PropTypes.array.isRequired,\r\n\r\n\tclip: PropTypes.bool.isRequired,\r\n\tedgeClip: PropTypes.bool.isRequired,\r\n\tinteractiveCursorClass: PropTypes.string,\r\n\r\n\tselected: PropTypes.bool.isRequired,\r\n\tdisablePan: PropTypes.bool.isRequired,\r\n\r\n\tcanvasToDraw: PropTypes.func.isRequired,\r\n\r\n\tisHover: PropTypes.func,\r\n\r\n\tonClick: PropTypes.func,\r\n\tonClickWhenHover: PropTypes.func,\r\n\tonClickOutside: PropTypes.func,\r\n\r\n\tonPan: PropTypes.func,\r\n\tonPanEnd: PropTypes.func,\r\n\tonDragStart: PropTypes.func,\r\n\tonDrag: PropTypes.func,\r\n\tonDragComplete: PropTypes.func,\r\n\tonDoubleClick: PropTypes.func,\r\n\tonDoubleClickWhenHover: PropTypes.func,\r\n\tonContextMenu: PropTypes.func,\r\n\tonContextMenuWhenHover: PropTypes.func,\r\n\tonMouseMove: PropTypes.func,\r\n\tonMouseDown: PropTypes.func,\r\n\tonHover: PropTypes.func,\r\n\tonUnHover: PropTypes.func,\r\n\r\n\tdebug: PropTypes.func,\r\n\t// owner: PropTypes.string.isRequired,\r\n};\r\n\r\nGenericComponent.defaultProps = {\r\n\tsvgDraw: functor(null),\r\n\tdraw: [],\r\n\tcanvasToDraw: contexts => contexts.mouseCoord,\r\n\tclip: true,\r\n\tedgeClip: false,\r\n\tselected: false,\r\n\tdisablePan: false,\r\n\r\n\tonClickWhenHover: noop,\r\n\tonClickOutside: noop,\r\n\tonDragStart: noop,\r\n\tonMouseMove: noop,\r\n\tonMouseDown: noop,\r\n\tdebug: noop,\r\n};\r\n\r\nGenericComponent.contextTypes = {\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n\tmargin: PropTypes.object.isRequired,\r\n\tchartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n\tgetCanvasContexts: PropTypes.func,\r\n\r\n\tchartCanvasType: PropTypes.string,\r\n\txScale: PropTypes.func.isRequired,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\tdisplayXAccessor: PropTypes.func.isRequired,\r\n\tplotData: PropTypes.array.isRequired,\r\n\tfullData: PropTypes.array.isRequired,\r\n\r\n\tchartConfig: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.object,\r\n\t]).isRequired,\r\n\r\n\tmorePropsDecorator: PropTypes.func,\r\n\tgenerateSubscriptionId: PropTypes.func,\r\n\tgetMutableState: PropTypes.func.isRequired,\r\n\r\n\tamIOnTop: PropTypes.func.isRequired,\r\n\tsubscribe: PropTypes.func.isRequired,\r\n\tunsubscribe: PropTypes.func.isRequired,\r\n\tsetCursorClass: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default GenericComponent;\r\n\r\nexport function getAxisCanvas(contexts) {\r\n\treturn contexts.axes;\r\n}\r\n\r\nexport function getMouseCanvas(contexts) {\r\n\treturn contexts.mouseCoord;\r\n}\r\n"]}