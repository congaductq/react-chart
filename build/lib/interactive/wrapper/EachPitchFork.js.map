{"version":3,"sources":["../../../../src/lib/interactive/wrapper/EachPitchFork.js"],"names":["EachPitchFork","props","handleChangeStart","bind","handleChangeEnd","handleChangeFinish","handleDragStart","handleChannelDrag","getEdgeCircle","handleHover","isHover","saveNodeType","nodes","state","hover","moreProps","hovering","setState","startXY","endXY","finishXY","dragStart","index","onDrag","xScale","yScale","chartConfig","xAccessor","fullData","startPos","mouseXY","x1","y1","x2","y2","x3","y3","dx","dy","newStartX","newStartY","invert","newEndX","newEndY","newFinishX","newFinishY","xy","dragHandler","cursor","fill","edge","appearance","edgeStroke","edgeStrokeWidth","r","selected","onDragComplete","type","interactive","hoverText","edgeFill","edgeFill2","stroke","strokeMedianOne","strokeMedianHalf","strokeWidth","strokeOpacity","fillOpacity","hoverTextEnabled","enable","restHoverTextProps","hoverHandler","onHover","onUnHover","startEdge","endEdge","Component","propTypes","PropTypes","oneOf","arrayOf","number","isRequired","bool","object","shape","string","func","defaultProps","yDisplayFormat","d","toFixed","noop"],"mappings":"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","file":"EachPitchFork.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { isDefined, noop } from \"../../utils\";\r\nimport { getXValue } from \"../../utils/ChartDataUtil\";\r\nimport { saveNodeType, isHover } from \"../utils\";\r\n\r\nimport ClickableCircle from \"../components/ClickableCircle\";\r\nimport PitchFork from \"../components/PitchFork\";\r\nimport HoverTextNearMouse from \"../components/HoverTextNearMouse\";\r\n\r\nclass EachPitchFork extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.handleChangeStart = this.handleChangeStart.bind(this);\r\n\t\tthis.handleChangeEnd = this.handleChangeEnd.bind(this);\r\n\t\tthis.handleChangeFinish = this.handleChangeFinish.bind(this);\r\n\t\tthis.handleDragStart = this.handleDragStart.bind(this);\r\n\t\tthis.handleChannelDrag = this.handleChannelDrag.bind(this);\r\n\t\tthis.getEdgeCircle = this.getEdgeCircle.bind(this);\r\n\t\tthis.handleHover = this.handleHover.bind(this);\r\n\r\n\t\tthis.isHover = isHover.bind(this);\r\n\t\tthis.saveNodeType = saveNodeType.bind(this);\r\n\t\tthis.nodes = {};\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t};\r\n\t}\r\n\thandleHover(moreProps) {\r\n\t\tif (this.state.hover !== moreProps.hovering) {\r\n\t\t\tthis.setState({\r\n\t\t\t\thover: moreProps.hovering\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleDragStart() {\r\n\t\tconst {\r\n\t\t\tstartXY, endXY, finishXY,\r\n\t\t} = this.props;\r\n\r\n\t\tthis.dragStart = {\r\n\t\t\tstartXY, endXY, finishXY,\r\n\t\t};\r\n\t}\r\n\thandleChannelDrag(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\r\n\t\tconst {\r\n\t\t\tstartXY, endXY, finishXY,\r\n\t\t} = this.dragStart;\r\n\r\n\t\tconst { xScale, chartConfig: { yScale }, xAccessor, fullData } = moreProps;\r\n\t\tconst { startPos, mouseXY } = moreProps;\r\n\r\n\t\tconst x1 = xScale(startXY[0]);\r\n\t\tconst y1 = yScale(startXY[1]);\r\n\t\tconst x2 = xScale(endXY[0]);\r\n\t\tconst y2 = yScale(endXY[1]);\r\n\t\tconst x3 = xScale(finishXY[0]);\r\n\t\tconst y3 = yScale(finishXY[1]);\r\n\r\n\t\tconst dx = startPos[0] - mouseXY[0];\r\n\t\tconst dy = startPos[1] - mouseXY[1];\r\n\r\n\t\tconst newStartX = getXValue(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\r\n\t\tconst newStartY = yScale.invert(y1 - dy);\r\n\t\tconst newEndX = getXValue(xScale, xAccessor, [x2 - dx, y2 - dy], fullData);\r\n\t\tconst newEndY = yScale.invert(y2 - dy);\r\n\t\tconst newFinishX = getXValue(xScale, xAccessor, [x3 - dx, y3 - dy], fullData);\r\n\t\tconst newFinishY = yScale.invert(y3 - dy);\r\n\t\tonDrag(index, {\r\n\t\t\tstartXY: [newStartX, newStartY],\r\n\t\t\tendXY: [newEndX, newEndY],\r\n\t\t\tfinishXY: [newFinishX, newFinishY],\r\n\t\t});\r\n\t}\r\n\thandleChangeStart(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\r\n\t\tconst {\r\n\t\t\tstartXY, endXY, finishXY,\r\n\t\t} = this.dragStart;\r\n\r\n\t\tconst { xScale, chartConfig: { yScale }, xAccessor, fullData } = moreProps;\r\n\t\tconst { startPos, mouseXY } = moreProps;\r\n\r\n\t\tconst x2 = xScale(startXY[0]);\r\n\t\tconst y2 = yScale(startXY[1]);\r\n\r\n\t\tconst dx = startPos[0] - mouseXY[0];\r\n\t\tconst dy = startPos[1] - mouseXY[1];\r\n\r\n\t\tconst newFinishX = getXValue(xScale, xAccessor, [x2 - dx, y2 - dy], fullData);\r\n\t\tconst newFinishY = yScale.invert(y2 - dy);\r\n\t\tonDrag(index, { endXY, finishXY,\r\n\t\t\tstartXY: [newFinishX, newFinishY],\r\n\t\t});\r\n\t}\r\n\thandleChangeEnd(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\r\n\t\tconst {\r\n\t\t\tstartXY, endXY, finishXY,\r\n\t\t} = this.dragStart;\r\n\r\n\t\tconst { xScale, chartConfig: { yScale }, xAccessor, fullData } = moreProps;\r\n\t\tconst { startPos, mouseXY } = moreProps;\r\n\r\n\t\tconst x2 = xScale(endXY[0]);\r\n\t\tconst y2 = yScale(endXY[1]);\r\n\r\n\t\tconst dx = startPos[0] - mouseXY[0];\r\n\t\tconst dy = startPos[1] - mouseXY[1];\r\n\r\n\t\tconst newFinishX = getXValue(xScale, xAccessor, [x2 - dx, y2 - dy], fullData);\r\n\t\tconst newFinishY = yScale.invert(y2 - dy);\r\n\t\tonDrag(index, { startXY, finishXY,\r\n\t\t\tendXY: [newFinishX, newFinishY],\r\n\t\t});\r\n\t}\r\n\thandleChangeFinish(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\r\n\t\tconst {\r\n\t\t\tstartXY, endXY, finishXY,\r\n\t\t} = this.dragStart;\r\n\r\n\t\tconst { xScale, chartConfig: { yScale }, xAccessor, fullData } = moreProps;\r\n\t\tconst { startPos, mouseXY } = moreProps;\r\n\r\n\t\tconst x2 = xScale(finishXY[0]);\r\n\t\tconst y2 = yScale(finishXY[1]);\r\n\r\n\t\tconst dx = startPos[0] - mouseXY[0];\r\n\t\tconst dy = startPos[1] - mouseXY[1];\r\n\r\n\t\tconst newFinishX = getXValue(xScale, xAccessor, [x2 - dx, y2 - dy], fullData);\r\n\t\tconst newFinishY = yScale.invert(y2 - dy);\r\n\r\n\t\tonDrag(index, { startXY, endXY,\r\n\t\t\tfinishXY: [newFinishX, newFinishY],\r\n\t\t});\r\n\t}\r\n\tgetEdgeCircle({ xy, dragHandler, cursor, fill, edge }) {\r\n\t\tconst { hover } = this.state;\r\n\t\tconst { appearance } = this.props;\r\n\t\tconst { edgeStroke, edgeStrokeWidth, r } = appearance;\r\n\t\tconst { selected } = this.props;\r\n\t\tconst { onDragComplete } = this.props;\r\n\t\treturn <ClickableCircle\r\n\t\t\tref={this.saveNodeType(edge)}\r\n\t\t\tshow={selected || hover}\r\n\t\t\tcx={xy[0]}\r\n\t\t\tcy={xy[1]}\r\n\t\t\tr={r}\r\n\t\t\tfill={fill}\r\n\t\t\tstroke={edgeStroke}\r\n\t\t\tstrokeWidth={edgeStrokeWidth}\r\n\t\t\tinteractiveCursorClass={cursor}\r\n\r\n\t\t\tonDragStart={this.handleDragStart}\r\n\t\t\tonDrag={dragHandler}\r\n\t\t\tonDragComplete={onDragComplete} />;\r\n\t}\r\n\trender() {\r\n\t\tconst { startXY, endXY, finishXY, type, interactive, hoverText, appearance, selected, onDragComplete } = this.props;\r\n\r\n\t\tconst {\r\n\t\t\tedgeFill, edgeFill2,\r\n\t\t\tstroke, strokeMedianOne, strokeMedianHalf, strokeWidth, strokeOpacity,\r\n\t\t\tfill, fillOpacity,\r\n\t\t} = appearance;\r\n\t\tconst { hover } = this.state;\r\n\t\tconst { enable: hoverTextEnabled, ...restHoverTextProps } = hoverText;\r\n\r\n\t\tconst hoverHandler = interactive\r\n\t\t\t? { onHover: this.handleHover, onUnHover: this.handleHover }\r\n\t\t\t: {};\r\n\r\n\t\tconst startEdge = isDefined(startXY) && isDefined(endXY)\r\n\t\t\t? <g>\r\n\t\t\t\t{this.getEdgeCircle({\r\n\t\t\t\t\txy: startXY,\r\n\t\t\t\t\tdragHandler: this.handleChangeStart,\r\n\t\t\t\t\tcursor: \"react-stockcharts-move-cursor\",\r\n\t\t\t\t\tfill: edgeFill,\r\n\t\t\t\t\tedge: \"startEdge\",\r\n\t\t\t\t})}\r\n\t\t\t\t{this.getEdgeCircle({\r\n\t\t\t\t\txy: endXY,\r\n\t\t\t\t\tdragHandler: this.handleChangeEnd,\r\n\t\t\t\t\tcursor: \"react-stockcharts-move-cursor\",\r\n\t\t\t\t\tfill: edgeFill,\r\n\t\t\t\t\tedge: \"endEdge\",\r\n\t\t\t\t})}\r\n\t\t\t</g>\r\n\t\t\t: null;\r\n\t\tconst endEdge = isDefined(finishXY)\r\n\t\t\t? <g>\r\n\t\t\t\t{this.getEdgeCircle({\r\n\t\t\t\t\txy: finishXY,\r\n\t\t\t\t\tdragHandler: this.handleChangeFinish,\r\n\t\t\t\t\tcursor: \"react-stockcharts-move-cursor\",\r\n\t\t\t\t\tfill: edgeFill2,\r\n\t\t\t\t\tedge: \"finishEdge\",\r\n\t\t\t\t})}\r\n\t\t\t</g>\r\n\t\t\t: null;\r\n\t\treturn <g>\r\n\t\t\t<PitchFork\r\n\t\t\t\tref={this.saveNodeType(\"channel\")}\r\n\t\t\t\tselected={selected || hover}\r\n\r\n\t\t\t\t{...hoverHandler}\r\n\r\n\t\t\t\tstartXY={startXY}\r\n\t\t\t\tendXY={endXY}\r\n\t\t\t\tfinishXY={finishXY}\r\n\t\t\t\ttype={type}\r\n\t\t\t\tstroke={stroke}\r\n\t\t\t\tstrokeMedianOne={strokeMedianOne}\r\n\t\t\t\tstrokeMedianHalf={strokeMedianHalf}\r\n\t\t\t\tstrokeWidth={(hover || selected) ? strokeWidth + 1 : strokeWidth}\r\n\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\t\tfill={fill}\r\n\t\t\t\tfillOpacity={fillOpacity}\r\n\t\t\t\tinteractiveCursorClass=\"react-stockcharts-move-cursor\"\r\n\t\t\t\tonDragStart={this.handleDragStart}\r\n\t\t\t\tonDrag={this.handleChannelDrag}\r\n\t\t\t\tonDragComplete={onDragComplete}\r\n\t\t\t/>\r\n\t\t\t{startEdge}\r\n\t\t\t{endEdge}\r\n\t\t\t<HoverTextNearMouse\r\n\t\t\t\tshow={hoverTextEnabled && hover && !selected}\r\n\t\t\t\t{...restHoverTextProps} />\r\n\t\t</g>;\r\n\t}\r\n}\r\n\r\nEachPitchFork.propTypes = {\r\n\ttype: PropTypes.oneOf([\r\n\t\t\"PITCHFORK\", // extends from -Infinity to +Infinity\r\n\t\t\"TRIANGLE\", // extends to +/-Infinity in one direction\r\n\t]),\r\n\tstartXY: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n\tendXY: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n\tfinishXY: PropTypes.arrayOf(PropTypes.number),\r\n\r\n\tinteractive: PropTypes.bool.isRequired,\r\n\tselected: PropTypes.bool.isRequired,\r\n\thoverText: PropTypes.object.isRequired,\r\n\r\n\tappearance: PropTypes.shape({\r\n\t\tstroke: PropTypes.string.isRequired,\r\n\t\tstrokeMedianOne: PropTypes.string.isRequired,\r\n\t\tstrokeMedianHalf: PropTypes.string.isRequired,\r\n\t\tfillOpacity: PropTypes.number.isRequired,\r\n\t\tstrokeOpacity: PropTypes.number.isRequired,\r\n\t\tstrokeWidth: PropTypes.number.isRequired,\r\n\t\tfill: PropTypes.string.isRequired,\r\n\t\tedgeStroke: PropTypes.string.isRequired,\r\n\t\tedgeFill: PropTypes.string.isRequired,\r\n\t\tedgeFill2: PropTypes.string.isRequired,\r\n\t\tedgeStrokeWidth: PropTypes.number.isRequired,\r\n\t\tr: PropTypes.number.isRequired,\r\n\t}).isRequired,\r\n\r\n\tindex: PropTypes.number,\r\n\tonDrag: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n};\r\n\r\nEachPitchFork.defaultProps = {\r\n\tyDisplayFormat: d => d.toFixed(2),\r\n\tinteractive: true,\r\n\tselected: false,\r\n\r\n\tonDrag: noop,\r\n\tonDragComplete: noop,\r\n\thoverText: {\r\n\t\tenable: false,\r\n\t}\r\n};\r\n\r\nexport default EachPitchFork;"]}