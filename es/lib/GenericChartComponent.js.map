{"version":3,"sources":["../../../src/lib/GenericChartComponent.js"],"names":["PropTypes","GenericComponent","isDefined","find","ALWAYS_TRUE_TYPES","GenericChartComponent","props","context","preCanvasDraw","bind","postCanvasDraw","shouldTypeProceed","preEvaluate","ctx","moreProps","save","margin","ratio","chartConfig","canvasOriginX","origin","left","canvasOriginY","top","width","height","clip","edgeClip","setTransform","scale","beginPath","rect","right","translate","restore","chartConfigList","chartId","each","id","ox","oy","mouseXY","x","y","startPos","type","disablePan","indexOf","currentCharts","propTypes","defaultProps","contextTypes","number","oneOfType","string","isRequired","object"],"mappings":"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","file":"GenericChartComponent.js","sourcesContent":["\"use strict\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport GenericComponent from \"./GenericComponent\";\r\nimport {\r\n\tisDefined,\r\n\tfind,\r\n} from \"./utils\";\r\n\r\nconst ALWAYS_TRUE_TYPES = [\r\n\t\"drag\",\r\n\t\"dragend\"\r\n];\r\n\r\nclass GenericChartComponent extends GenericComponent {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\r\n\t\tthis.preCanvasDraw = this.preCanvasDraw.bind(this);\r\n\t\tthis.postCanvasDraw = this.postCanvasDraw.bind(this);\r\n\t\tthis.shouldTypeProceed = this.shouldTypeProceed.bind(this);\r\n\t\tthis.preEvaluate = this.preEvaluate.bind(this);\r\n\t}\r\n\tpreCanvasDraw(ctx, moreProps) {\r\n\t\tsuper.preCanvasDraw(ctx, moreProps);\r\n\t\tctx.save();\r\n\t\tconst { margin, ratio } = this.context;\r\n\t\tconst { chartConfig } = moreProps;\r\n\r\n\t\tconst canvasOriginX = (0.5 * ratio) + chartConfig.origin[0] + margin.left;\r\n\t\tconst canvasOriginY = (0.5 * ratio) + chartConfig.origin[1] + margin.top;\r\n\r\n\t\tconst { chartConfig: { width, height } } = moreProps;\r\n\t\tconst { clip, edgeClip } = this.props;\r\n\r\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\tctx.scale(ratio, ratio);\r\n\t\tif (edgeClip) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(-1, canvasOriginY - 10, width + margin.left + margin.right + 1, height + 20);\r\n\t\t\tctx.clip();\r\n\t\t}\r\n\r\n\t\tctx.translate(canvasOriginX, canvasOriginY);\r\n\r\n\t\tif (clip) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(-1, -1, width + 1, height + 1);\r\n\t\t\tctx.clip();\r\n\t\t}\r\n\t}\r\n\tpostCanvasDraw(ctx, moreProps) {\r\n\t\tsuper.postCanvasDraw(ctx, moreProps);\r\n\t\tctx.restore();\r\n\t}\r\n\tupdateMoreProps(moreProps) {\r\n\t\tsuper.updateMoreProps(moreProps);\r\n\t\tconst { chartConfig: chartConfigList } = moreProps;\r\n\r\n\t\tif (chartConfigList) {\r\n\t\t\tconst { chartId } = this.context;\r\n\t\t\tconst chartConfig = find(chartConfigList, each => each.id === chartId);\r\n\t\t\tthis.moreProps.chartConfig = chartConfig;\r\n\t\t}\r\n\t\tif (isDefined(this.moreProps.chartConfig)) {\r\n\t\t\tconst { origin: [ox, oy] } = this.moreProps.chartConfig;\r\n\t\t\tif (isDefined(moreProps.mouseXY)) {\r\n\t\t\t\tconst { mouseXY: [x, y] } = moreProps;\r\n\t\t\t\tthis.moreProps.mouseXY = [\r\n\t\t\t\t\tx - ox,\r\n\t\t\t\t\ty - oy\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\tif (isDefined(moreProps.startPos)) {\r\n\t\t\t\tconst { startPos: [x, y] } = moreProps;\r\n\t\t\t\tthis.moreProps.startPos = [\r\n\t\t\t\t\tx - ox,\r\n\t\t\t\t\ty - oy\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tpreEvaluate(/* type, moreProps */) {\r\n\t\t/* if (\r\n\t\t\ttype === \"mousemove\"\r\n\t\t\t&& this.props.onMouseMove\r\n\t\t\t&& isDefined(moreProps)\r\n\t\t\t&& isDefined(moreProps.currentCharts)\r\n\t\t) {\r\n\t\t\tif (moreProps.currentCharts.indexOf(this.context.chartId) === -1) {\r\n\t\t\t\tmoreProps.show = false;\r\n\t\t\t}\r\n\t\t} */\r\n\t}\r\n\tshouldTypeProceed(type, moreProps) {\r\n\t\tif (\r\n\t\t\t(type === \"mousemove\" || type === \"click\")\r\n\t\t\t&& this.props.disablePan) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (\r\n\t\t\tALWAYS_TRUE_TYPES.indexOf(type) === -1\r\n\t\t\t&& isDefined(moreProps)\r\n\t\t\t&& isDefined(moreProps.currentCharts)\r\n\t\t) {\r\n\t\t\treturn (moreProps.currentCharts.indexOf(this.context.chartId) > -1);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nGenericChartComponent.propTypes = GenericComponent.propTypes;\r\n\r\nGenericChartComponent.defaultProps = GenericComponent.defaultProps;\r\n\r\nGenericChartComponent.contextTypes = {\r\n\t...GenericComponent.contextTypes,\r\n\tcanvasOriginX: PropTypes.number,\r\n\tcanvasOriginY: PropTypes.number,\r\n\tchartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n\tchartConfig: PropTypes.object.isRequired,\r\n\tratio: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default GenericChartComponent;\r\n"]}