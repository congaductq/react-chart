{"version":3,"sources":["../../../../src/lib/tooltip/OHLCTooltip.js"],"names":["React","Component","PropTypes","format","timeFormat","displayValuesFor","GenericChartComponent","isDefined","functor","ToolTipText","ToolTipTSpanLabel","OHLCTooltip","props","renderSVG","bind","moreProps","xDisplayFormat","accessor","volumeFormat","ohlcFormat","percentFormat","displayTexts","chartConfig","width","height","displayXAccessor","currentItem","displayDate","open","high","low","close","volume","percent","max_cap","na","item","originProp","origin","x","y","itemsToDisplay","children","propTypes","className","string","func","oneOfType","array","fontFamily","fontSize","number","onClick","textFill","labelFill","object","displayTextsDefault","d","o","h","l","c","v","m","defaultProps","date","defaultDisplay"],"mappings":"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","file":"OHLCTooltip.js","sourcesContent":["\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { format } from \"d3-format\";\r\nimport { timeFormat } from \"d3-time-format\";\r\nimport displayValuesFor from \"./displayValuesFor\";\r\nimport GenericChartComponent from \"../GenericChartComponent\";\r\n\r\nimport { isDefined, functor } from \"../utils\";\r\nimport ToolTipText from \"./ToolTipText\";\r\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\r\n\r\nclass OHLCTooltip extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst { displayValuesFor } = this.props;\r\n\t\tconst {\r\n\t\t\txDisplayFormat,\r\n\t\t\taccessor,\r\n\t\t\tvolumeFormat,\r\n\t\t\tohlcFormat,\r\n\t\t\tpercentFormat,\r\n\t\t\tdisplayTexts\r\n\t\t} = this.props;\r\n\r\n\t\tconst { chartConfig: { width, height } } = moreProps;\r\n\t\tconst { displayXAccessor } = moreProps;\r\n\r\n\t\tconst currentItem = displayValuesFor(this.props, moreProps);\r\n\r\n\t\tlet displayDate, open, high, low, close, volume, percent, max_cap;\r\n\t\tdisplayDate = open = high = low = close = volume = percent = max_cap = displayTexts.na;\r\n\r\n\t\tif (isDefined(currentItem) && isDefined(accessor(currentItem))) {\r\n\t\t\tconst item = accessor(currentItem);\r\n\t\t\tvolume = isDefined(item.volume) ? volumeFormat(item.volume) : displayTexts.na;\r\n\t\t\tmax_cap = isDefined(item.max_cap) ? volumeFormat(item.max_cap) : displayTexts.na;\r\n\r\n\t\t\tdisplayDate = xDisplayFormat(displayXAccessor(item));\r\n\t\t\topen = ohlcFormat(item.open);\r\n\t\t\thigh = ohlcFormat(item.high);\r\n\t\t\tlow = ohlcFormat(item.low);\r\n\t\t\tclose = ohlcFormat(item.close);\r\n\t\t\tpercent = percentFormat((item.close - item.open) / item.open);\r\n\t\t}\r\n\r\n\t\tconst { origin: originProp } = this.props;\r\n\t\tconst origin = functor(originProp);\r\n\t\tconst [x, y] = origin(width, height);\r\n\r\n\t\tconst itemsToDisplay = {\r\n\t\t\tdisplayDate,\r\n\t\t\topen,\r\n\t\t\thigh,\r\n\t\t\tlow,\r\n\t\t\tclose,\r\n\t\t\tpercent,\r\n\t\t\tvolume,\r\n\t\t\tmax_cap,\r\n\t\t\tx,\r\n\t\t\ty\r\n\t\t};\r\n\t\treturn this.props.children(this.props, moreProps, itemsToDisplay);\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<GenericChartComponent\r\n\t\t\t\tclip={false}\r\n\t\t\t\tsvgDraw={this.renderSVG}\r\n\t\t\t\tdrawOn={[\"mousemove\"]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nOHLCTooltip.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\taccessor: PropTypes.func,\r\n\txDisplayFormat: PropTypes.func,\r\n\tchildren: PropTypes.func,\r\n\tvolumeFormat: PropTypes.func,\r\n\tpercentFormat: PropTypes.func,\r\n\tohlcFormat: PropTypes.func,\r\n\torigin: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\tonClick: PropTypes.func,\r\n\tdisplayValuesFor: PropTypes.func,\r\n\ttextFill: PropTypes.string,\r\n\tlabelFill: PropTypes.string,\r\n\tdisplayTexts: PropTypes.object,\r\n};\r\n\r\nconst displayTextsDefault = {\r\n\td: \"Date: \",\r\n\to: \" O: \",\r\n\th: \" H: \",\r\n\tl: \" L: \",\r\n\tc: \" C: \",\r\n\tv: \" Vol: \",\r\n\tm: \" Cap: \",\r\n\tna: \"n/a\"\r\n};\r\n\r\nOHLCTooltip.defaultProps = {\r\n\taccessor: d => {\r\n\t\treturn {\r\n\t\t\tdate: d.date,\r\n\t\t\topen: d.open,\r\n\t\t\thigh: d.high,\r\n\t\t\tlow: d.low,\r\n\t\t\tclose: d.close,\r\n\t\t\tvolume: d.volume,\r\n\t\t\tmax_cap: d.max_cap,\r\n\t\t};\r\n\t},\r\n\txDisplayFormat: timeFormat(\"%Y-%m-%d\"),\r\n\tvolumeFormat: format(\".4s\"),\r\n\tpercentFormat: format(\".2%\"),\r\n\tohlcFormat: format(\".2f\"),\r\n\tdisplayValuesFor: displayValuesFor,\r\n\torigin: [0, 0],\r\n\tchildren: defaultDisplay,\r\n\tdisplayTexts: displayTextsDefault,\r\n};\r\n\r\nfunction defaultDisplay(props, moreProps, itemsToDisplay) {\r\n\r\n\t/* eslint-disable */\r\n\tconst {\r\n\t\tclassName,\r\n\t\ttextFill,\r\n\t\tlabelFill,\r\n\t\tonClick,\r\n\t\tfontFamily,\r\n\t\tfontSize,\r\n\t\tdisplayTexts\r\n\t} = props;\r\n\t/* eslint-enable */\r\n\r\n\tconst {\r\n\t\tdisplayDate,\r\n\t\topen,\r\n\t\thigh,\r\n\t\tlow,\r\n\t\tclose,\r\n\t\tvolume,\r\n\t\tmax_cap,\r\n\t\tx,\r\n\t\ty\r\n\t} = itemsToDisplay;\r\n\treturn (\r\n\t\t<g\r\n\t\t\tclassName={`react-stockcharts-tooltip-hover ${className}`}\r\n\t\t\ttransform={`translate(${x}, ${y})`}\r\n\t\t\tonClick={onClick}\r\n\t\t>\r\n\t\t\t<ToolTipText\r\n\t\t\t\tx={0}\r\n\t\t\t\ty={0}\r\n\t\t\t\tfontFamily={fontFamily}\r\n\t\t\t\tfontSize={fontSize}\r\n\t\t\t>\r\n\t\t\t\t<ToolTipTSpanLabel\r\n\t\t\t\t\tfill={labelFill}\r\n\t\t\t\t\tkey=\"label\"\r\n\t\t\t\t\tx={0}\r\n\t\t\t\t\tdy=\"5\">{displayTexts.d}</ToolTipTSpanLabel>\r\n\t\t\t\t<tspan key=\"value\" fill={textFill}>{displayDate}</tspan>\r\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_O\">{displayTexts.o}</ToolTipTSpanLabel>\r\n\t\t\t\t<tspan key=\"value_O\" fill={textFill}>{open}</tspan>\r\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_H\">{displayTexts.h}</ToolTipTSpanLabel>\r\n\t\t\t\t<tspan key=\"value_H\" fill={textFill}>{high}</tspan>\r\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_L\">{displayTexts.l}</ToolTipTSpanLabel>\r\n\t\t\t\t<tspan key=\"value_L\" fill={textFill}>{low}</tspan>\r\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_C\">{displayTexts.c}</ToolTipTSpanLabel>\r\n\t\t\t\t<tspan key=\"value_C\" fill={textFill}>{close}</tspan>\r\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_Vol\">{displayTexts.v}</ToolTipTSpanLabel>\r\n\t\t\t\t<tspan key=\"value_Vol\" fill={textFill}>{volume}</tspan>\r\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_Cap\">{displayTexts.m}</ToolTipTSpanLabel>\r\n\t\t\t\t<tspan key=\"value_Cap\" fill={textFill}>{max_cap}</tspan>\r\n\t\t\t</ToolTipText>\r\n\t\t</g>\r\n\t);\r\n}\r\n\r\nexport default OHLCTooltip;\r\n"]}