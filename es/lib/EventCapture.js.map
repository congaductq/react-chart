{"version":3,"sources":["../../../src/lib/EventCapture.js"],"names":["React","Component","PropTypes","select","event","d3Event","mouse","touches","isDefined","mousePosition","touchPosition","getTouchProps","d3Window","MOUSEMOVE","MOUSEUP","MOUSEENTER","MOUSELEAVE","TOUCHMOVE","TOUCHEND","noop","getCurrentCharts","EventCapture","props","handleEnter","bind","handleLeave","handleWheel","handleMouseMove","handleMouseDown","handlePanEnd","handlePan","handleTouchStart","handlePinchZoom","handlePinchZoomEnd","handleClick","handleRightClick","handleDrag","handleDragEnd","setCursorClass","saveNode","mouseInside","mouseInteraction","state","panInProgress","node","focus","on","componentDidMount","e","onMouseEnter","dragInProgress","win","onMouseLeave","zoom","onZoom","deltaY","preventDefault","newPos","zoomDir","onMouseMove","mouseMove","mouseXY","onClick","onDoubleClick","panHappened","dragHappened","clicked","setTimeout","stopPropagation","onContextMenu","onPanEnd","getBoundingClientRect","panStart","panStartXScale","panOrigin","chartsToPan","setState","onDrag","startPos","dragStartPosition","onDragComplete","button","initialPanEnabled","pan","xScale","chartConfig","onMouseDown","getAllPanConditions","currentCharts","reduce","returnObj","a","draggable","panEnabled","somethingSelected","onDragStart","onPan","lastNewPos","length","touchXY","touch1Pos","touch2Pos","pinchZoomStart","range","zoomEnabled","onPinchZoom","initialPinch","onPinchZoomEnd","cursorOverrideClass","height","width","className","opacity","propTypes","bool","isRequired","panSpeedMultiplier","number","array","func","xAccessor","children","defaultProps"],"mappings":"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","file":"EventCapture.js","sourcesContent":["\"use strict\";\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { select, event as d3Event, mouse, touches } from \"d3-selection\";\r\n\r\nimport {\r\n\tisDefined, mousePosition, touchPosition, getTouchProps,\r\n\td3Window,\r\n\tMOUSEMOVE, MOUSEUP,\r\n\tMOUSEENTER, MOUSELEAVE,\r\n\tTOUCHMOVE, TOUCHEND,\r\n\tnoop\r\n} from \"./utils\";\r\nimport { getCurrentCharts } from \"./utils/ChartDataUtil\";\r\n\r\n\r\nclass EventCapture extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.handleEnter = this.handleEnter.bind(this);\r\n\t\tthis.handleLeave = this.handleLeave.bind(this);\r\n\t\tthis.handleWheel = this.handleWheel.bind(this);\r\n\t\tthis.handleMouseMove = this.handleMouseMove.bind(this);\r\n\t\tthis.handleMouseDown = this.handleMouseDown.bind(this);\r\n\t\tthis.handlePanEnd = this.handlePanEnd.bind(this);\r\n\t\tthis.handlePan = this.handlePan.bind(this);\r\n\t\tthis.handleTouchStart = this.handleTouchStart.bind(this);\r\n\t\tthis.handlePinchZoom = this.handlePinchZoom.bind(this);\r\n\t\tthis.handlePinchZoomEnd = this.handlePinchZoomEnd.bind(this);\r\n\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n\r\n\t\tthis.handleRightClick = this.handleRightClick.bind(this);\r\n\t\tthis.handleDrag = this.handleDrag.bind(this);\r\n\t\tthis.handleDragEnd = this.handleDragEnd.bind(this);\r\n\r\n\t\tthis.setCursorClass = this.setCursorClass.bind(this);\r\n\t\tthis.saveNode = this.saveNode.bind(this);\r\n\r\n\t\tthis.mouseInside = false;\r\n\r\n\t\tthis.mouseInteraction = true;\r\n\t\tthis.state = {\r\n\t\t\tpanInProgress: false,\r\n\t\t};\r\n\t}\r\n\tsaveNode(node) {\r\n\t\tthis.node = node;\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\tthis.focus = this.props.focus;\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tif (this.node) {\r\n\t\t\tselect(this.node)\r\n\t\t\t\t.on(MOUSEENTER, this.handleEnter)\r\n\t\t\t\t.on(MOUSELEAVE, this.handleLeave);\r\n\t\t}\r\n\t}\r\n\tcomponentDidUpdate() {\r\n\t\tthis.componentDidMount();\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.node) {\r\n\t\t\tselect(this.node)\r\n\t\t\t\t.on(MOUSEENTER, null)\r\n\t\t\t\t.on(MOUSELEAVE, null);\r\n\t\t}\r\n\t}\r\n\thandleEnter() {\r\n\t\tconst e = d3Event;\r\n\r\n\t\tconst { onMouseEnter } = this.props;\r\n\t\tthis.mouseInside = true;\r\n\t\tif (!this.state.panInProgress\r\n\t\t\t\t&& !this.state.dragInProgress) {\r\n\t\t\tconst win = d3Window(this.node);\r\n\t\t\tselect(win)\r\n\t\t\t\t.on(MOUSEMOVE, this.handleMouseMove);\r\n\t\t}\r\n\t\tonMouseEnter(e);\r\n\t}\r\n\thandleLeave(e) {\r\n\t\tconst { onMouseLeave } = this.props;\r\n\t\tthis.mouseInside = false;\r\n\t\tif (!this.state.panInProgress\r\n\t\t\t\t&& !this.state.dragInProgress) {\r\n\t\t\tconst win = d3Window(this.node);\r\n\t\t\tselect(win)\r\n\t\t\t\t.on(MOUSEMOVE, null);\r\n\t\t}\r\n\t\tonMouseLeave(e);\r\n\t}\r\n\thandleWheel(e) {\r\n\t\tconst { zoom, onZoom } = this.props;\r\n\r\n\t\tif (zoom && this.focus && e.deltaY !== 0) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tconst newPos = mousePosition(e);\r\n\t\t\tconst zoomDir = e.deltaY > 0 ? 1 : -1;\r\n\r\n\t\t\tonZoom(zoomDir, newPos, e);\r\n\t\t}\r\n\t}\r\n\thandleMouseMove() {\r\n\t\tconst e = d3Event;\r\n\r\n\t\tconst { onMouseMove, mouseMove } = this.props;\r\n\r\n\t\tif (this.mouseInteraction\r\n\t\t\t\t&& mouseMove\r\n\t\t\t\t&& !this.state.panInProgress) {\r\n\r\n\t\t\tconst newPos = mouse(this.node);\r\n\r\n\t\t\tonMouseMove(newPos, \"mouse\", e);\r\n\t\t}\r\n\t}\r\n\thandleClick(e) {\r\n\t\tconst mouseXY = mousePosition(e);\r\n\t\tconst { onClick, onDoubleClick } = this.props;\r\n\r\n\t\tif (!this.panHappened && !this.dragHappened) {\r\n\t\t\tif (this.clicked) {\r\n\t\t\t\tonDoubleClick(mouseXY, e);\r\n\t\t\t\tthis.clicked = false;\r\n\t\t\t} else {\r\n\t\t\t\tonClick(mouseXY, e);\r\n\t\t\t\tthis.clicked = true;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (this.clicked) {\r\n\t\t\t\t\t\tthis.clicked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 400);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\thandleRightClick(e) {\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\t\tconst { onContextMenu, onPanEnd } = this.props;\r\n\r\n\t\tconst mouseXY = mousePosition(e, this.node.getBoundingClientRect());\r\n\r\n\t\tif (isDefined(this.state.panStart)) {\r\n\t\t\tconst { panStartXScale, panOrigin, chartsToPan } = this.state.panStart;\r\n\t\t\tif (this.panHappened) {\r\n\t\t\t\tonPanEnd(mouseXY, panStartXScale, panOrigin, chartsToPan, e);\r\n\t\t\t}\r\n\t\t\tconst win = d3Window(this.node);\r\n\t\t\tselect(win)\r\n\t\t\t\t.on(MOUSEMOVE, null)\r\n\t\t\t\t.on(MOUSEUP, null);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tpanInProgress: false,\r\n\t\t\t\tpanStart: null,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tonContextMenu(mouseXY, e);\r\n\t}\r\n\r\n\thandleDrag() {\r\n\t\tconst e = d3Event;\r\n\t\tif (this.props.onDrag) {\r\n\t\t\tthis.dragHappened = true;\r\n\t\t\tconst mouseXY = mouse(this.node);\r\n\t\t\tthis.props.onDrag({\r\n\t\t\t\tstartPos: this.state.dragStartPosition,\r\n\t\t\t\tmouseXY\r\n\t\t\t}, e);\r\n\t\t}\r\n\t}\r\n\tcancelDrag() {\r\n\t\tconst win = d3Window(this.node);\r\n\t\tselect(win)\r\n\t\t\t.on(MOUSEMOVE, this.mouseInside ? this.handleMouseMove : null)\r\n\t\t\t.on(MOUSEUP, null);\r\n\r\n\t\tthis.setState({\r\n\t\t\tdragInProgress: false,\r\n\t\t});\r\n\t\tthis.mouseInteraction = true;\r\n\t}\r\n\thandleDragEnd() {\r\n\t\tconst e = d3Event;\r\n\t\tconst mouseXY = mouse(this.node);\r\n\r\n\t\tconst win = d3Window(this.node);\r\n\t\tselect(win)\r\n\t\t\t.on(MOUSEMOVE, this.mouseInside ? this.handleMouseMove : null)\r\n\t\t\t.on(MOUSEUP, null);\r\n\r\n\t\tif (this.dragHappened) {\r\n\t\t\tthis.props.onDragComplete({\r\n\t\t\t\tmouseXY\r\n\t\t\t}, e);\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tdragInProgress: false,\r\n\t\t});\r\n\t\tthis.mouseInteraction = true;\r\n\t}\r\n\thandleMouseDown(e) {\r\n\t\tif (e.button !== 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst { pan: initialPanEnabled, xScale, chartConfig, onMouseDown } = this.props;\r\n\t\tconst { getAllPanConditions } = this.props;\r\n\r\n\t\tthis.panHappened = false;\r\n\t\tthis.dragHappened = false;\r\n\t\tthis.focus = true;\r\n\r\n\t\tif (!this.state.panInProgress\r\n\t\t\t&& this.mouseInteraction\r\n\t\t) {\r\n\r\n\t\t\tconst mouseXY = mousePosition(e);\r\n\t\t\tconst currentCharts = getCurrentCharts(chartConfig, mouseXY);\r\n\t\t\tconst {\r\n\t\t\t\tpanEnabled,\r\n\t\t\t\tdraggable: somethingSelected\r\n\t\t\t} = getAllPanConditions()\r\n\t\t\t\t.reduce((returnObj, a) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tdraggable: returnObj.draggable || a.draggable,\r\n\t\t\t\t\t\tpanEnabled: returnObj.panEnabled && a.panEnabled,\r\n\t\t\t\t\t};\r\n\t\t\t\t}, {\r\n\t\t\t\t\tdraggable: false,\r\n\t\t\t\t\tpanEnabled: initialPanEnabled,\r\n\t\t\t\t});\r\n\r\n\t\t\tconst pan = panEnabled && !somethingSelected;\r\n\r\n\t\t\tif (pan) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpanInProgress: pan,\r\n\t\t\t\t\tpanStart: {\r\n\t\t\t\t\t\tpanStartXScale: xScale,\r\n\t\t\t\t\t\tpanOrigin: mouseXY,\r\n\t\t\t\t\t\tchartsToPan: currentCharts\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst win = d3Window(this.node);\r\n\t\t\t\tselect(win)\r\n\t\t\t\t\t.on(MOUSEMOVE, this.handlePan)\r\n\t\t\t\t\t.on(MOUSEUP, this.handlePanEnd);\r\n\r\n\t\t\t} else if (somethingSelected) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpanInProgress: false,\r\n\t\t\t\t\tdragInProgress: true,\r\n\t\t\t\t\tpanStart: null,\r\n\t\t\t\t\tdragStartPosition: mouseXY,\r\n\t\t\t\t});\r\n\t\t\t\tthis.props.onDragStart({ startPos: mouseXY }, e);\r\n\t\t\t\t// this.mouseInteraction = false;\r\n\r\n\t\t\t\tconst win = d3Window(this.node);\r\n\t\t\t\tselect(win)\r\n\t\t\t\t\t.on(MOUSEMOVE, this.handleDrag)\r\n\t\t\t\t\t.on(MOUSEUP, this.handleDragEnd);\r\n\t\t\t}\r\n\r\n\t\t\tonMouseDown(mouseXY, currentCharts, e);\r\n\t\t}\r\n\t\te.preventDefault();\r\n\t}\r\n\thandlePan() {\r\n\t\tconst e = d3Event;\r\n\r\n\t\tconst { pan: panEnabled, onPan } = this.props;\r\n\r\n\t\tif (panEnabled\r\n\t\t\t\t&& onPan\r\n\t\t\t\t&& isDefined(this.state.panStart)) {\r\n\r\n\t\t\tthis.panHappened = true;\r\n\r\n\t\t\tconst { panStartXScale, panOrigin, chartsToPan } = this.state.panStart;\r\n\r\n\t\t\tconst newPos = this.mouseInteraction\r\n\t\t\t\t? mouse(this.node)\r\n\t\t\t\t: touches(this.node)[0];\r\n\r\n\t\t\tthis.lastNewPos = newPos;\r\n\t\t\tonPan(newPos, panStartXScale, panOrigin, chartsToPan, e);\r\n\t\t}\r\n\t}\r\n\thandlePanEnd() {\r\n\t\tconst e = d3Event;\r\n\t\tconst { pan: panEnabled, onPanEnd } = this.props;\r\n\r\n\t\tif (isDefined(this.state.panStart)) {\r\n\t\t\tconst { panStartXScale, panOrigin, chartsToPan } = this.state.panStart;\r\n\r\n\t\t\tconst win = d3Window(this.node);\r\n\t\t\tselect(win)\r\n\t\t\t\t.on(MOUSEMOVE, this.mouseInside ? this.handleMouseMove : null)\r\n\t\t\t\t.on(MOUSEUP, null)\r\n\t\t\t\t.on(TOUCHMOVE, null)\r\n\t\t\t\t.on(TOUCHEND, null);\r\n\r\n\t\t\tif (this.panHappened\r\n\t\t\t\t\t// && !this.contextMenuClicked\r\n\t\t\t\t\t&& panEnabled\r\n\t\t\t\t\t&& onPanEnd) {\r\n\r\n\t\t\t\tonPanEnd(this.lastNewPos, panStartXScale, panOrigin, chartsToPan, e);\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tpanInProgress: false,\r\n\t\t\t\tpanStart: null,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleTouchStart(e) {\r\n\t\tthis.mouseInteraction = false;\r\n\r\n\t\tconst { pan: panEnabled, chartConfig, onMouseMove } = this.props;\r\n\t\tconst { xScale, onPanEnd } = this.props;\r\n\r\n\t\tif (e.touches.length === 1) {\r\n\r\n\t\t\tthis.panHappened = false;\r\n\t\t\tconst touchXY = touchPosition(getTouchProps(e.touches[0]), e);\r\n\t\t\t// onMouseMove(touchXY, \"touch\", e);\r\n\t\t\tif (panEnabled) {\r\n\t\t\t\tconst currentCharts = getCurrentCharts(chartConfig, touchXY);\r\n\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpanInProgress: true,\r\n\t\t\t\t\tpanStart: {\r\n\t\t\t\t\t\tpanStartXScale: xScale,\r\n\t\t\t\t\t\tpanOrigin: touchXY,\r\n\t\t\t\t\t\tchartsToPan: currentCharts,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tonMouseMove(touchXY, \"touch\", e);\r\n\r\n\t\t\t\tconst win = d3Window(this.node);\r\n\t\t\t\tselect(win)\r\n\t\t\t\t\t.on(TOUCHMOVE, this.handlePan, false)\r\n\t\t\t\t\t.on(TOUCHEND, this.handlePanEnd, false);\r\n\r\n\t\t\t}\r\n\t\t} else if (e.touches.length === 2) {\r\n\t\t\t// pinch zoom begin\r\n\t\t\t// do nothing pinch zoom is handled in handleTouchMove\r\n\t\t\tconst { panInProgress, panStart } = this.state;\r\n\r\n\t\t\tif (panInProgress && panEnabled && onPanEnd) {\r\n\t\t\t\tconst { panStartXScale, panOrigin, chartsToPan } = panStart;\r\n\r\n\t\t\t\tconst win = d3Window(this.node);\r\n\t\t\t\tselect(win)\r\n\t\t\t\t\t.on(MOUSEMOVE, this.mouseInside ? this.handleMouseMove : null)\r\n\t\t\t\t\t.on(MOUSEUP, null)\r\n\t\t\t\t\t.on(TOUCHMOVE, this.handlePinchZoom, false)\r\n\t\t\t\t\t.on(TOUCHEND, this.handlePinchZoomEnd, false);\r\n\r\n\t\t\t\tconst touch1Pos = touchPosition(getTouchProps(e.touches[0]), e);\r\n\t\t\t\tconst touch2Pos = touchPosition(getTouchProps(e.touches[1]), e);\r\n\r\n\t\t\t\tif (this.panHappened\r\n\t\t\t\t\t\t// && !this.contextMenuClicked\r\n\t\t\t\t\t\t&& panEnabled\r\n\t\t\t\t\t\t&& onPanEnd) {\r\n\r\n\t\t\t\t\tonPanEnd(this.lastNewPos, panStartXScale, panOrigin, chartsToPan, e);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpanInProgress: false,\r\n\t\t\t\t\tpinchZoomStart: {\r\n\t\t\t\t\t\txScale,\r\n\t\t\t\t\t\ttouch1Pos,\r\n\t\t\t\t\t\ttouch2Pos,\r\n\t\t\t\t\t\trange: xScale.range(),\r\n\t\t\t\t\t\tchartsToPan,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\thandlePinchZoom() {\r\n\t\tconst e = d3Event;\r\n\t\tconst [touch1Pos, touch2Pos] = touches(this.node);\r\n\t\tconst { xScale, zoom: zoomEnabled, onPinchZoom } = this.props;\r\n\r\n\t\t// eslint-disable-next-line no-unused-vars\r\n\t\tconst { chartsToPan, ...initialPinch } = this.state.pinchZoomStart;\r\n\r\n\t\tif (zoomEnabled && onPinchZoom) {\r\n\t\t\tonPinchZoom(initialPinch, {\r\n\t\t\t\ttouch1Pos,\r\n\t\t\t\ttouch2Pos,\r\n\t\t\t\txScale,\r\n\t\t\t}, e);\r\n\t\t}\r\n\t}\r\n\thandlePinchZoomEnd() {\r\n\t\tconst e = d3Event;\r\n\r\n\t\tconst win = d3Window(this.node);\r\n\t\tselect(win)\r\n\t\t\t.on(TOUCHMOVE, null)\r\n\t\t\t.on(TOUCHEND, null);\r\n\r\n\t\tconst { zoom: zoomEnabled, onPinchZoomEnd } = this.props;\r\n\r\n\t\t// eslint-disable-next-line no-unused-vars\r\n\t\tconst { chartsToPan, ...initialPinch } = this.state.pinchZoomStart;\r\n\r\n\t\tif (zoomEnabled && onPinchZoomEnd) {\r\n\t\t\tonPinchZoomEnd(initialPinch, e);\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tpinchZoomStart: null\r\n\t\t});\r\n\t}\r\n\tsetCursorClass(cursorOverrideClass) {\r\n\t\tif (cursorOverrideClass !== this.state.cursorOverrideClass) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tcursorOverrideClass\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tconst { height, width } = this.props;\r\n\t\tconst className = this.state.cursorOverrideClass != null\r\n\t\t\t? this.state.cursorOverrideClass\r\n\t\t\t: this.state.panInProgress\r\n\t\t\t\t? \"react-stockcharts-grabbing-cursor\"\r\n\t\t\t\t: \"react-stockcharts-crosshair-cursor\";\r\n\r\n\t\treturn (\r\n\t\t\t<rect ref={this.saveNode}\r\n\t\t\t\tclassName={className}\r\n\t\t\t\twidth={width}\r\n\t\t\t\theight={height}\r\n\t\t\t\tstyle={{ opacity: 0 }}\r\n\t\t\t\tonWheel={this.handleWheel}\r\n\t\t\t\tonMouseDown={this.handleMouseDown}\r\n\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\tonContextMenu={this.handleRightClick}\r\n\t\t\t\tonTouchStart={this.handleTouchStart}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// \t\t\t\tonMouseEnter={this.handleEnter}\r\n//\t\t\t\tonMouseLeave={this.handleLeave}\r\n\r\n\r\nEventCapture.propTypes = {\r\n\tmouseMove: PropTypes.bool.isRequired,\r\n\tzoom: PropTypes.bool.isRequired,\r\n\tpan: PropTypes.bool.isRequired,\r\n\tpanSpeedMultiplier: PropTypes.number.isRequired,\r\n\tfocus: PropTypes.bool.isRequired,\r\n\r\n\twidth: PropTypes.number.isRequired,\r\n\theight: PropTypes.number.isRequired,\r\n\tchartConfig: PropTypes.array,\r\n\txScale: PropTypes.func.isRequired,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\r\n\tgetAllPanConditions: PropTypes.func.isRequired,\r\n\r\n\tonMouseMove: PropTypes.func,\r\n\tonMouseEnter: PropTypes.func,\r\n\tonMouseLeave: PropTypes.func,\r\n\tonZoom: PropTypes.func,\r\n\tonPinchZoom: PropTypes.func,\r\n\tonPinchZoomEnd: PropTypes.func.isRequired,\r\n\tonPan: PropTypes.func,\r\n\tonPanEnd: PropTypes.func,\r\n\tonDragStart: PropTypes.func,\r\n\tonDrag: PropTypes.func,\r\n\tonDragComplete: PropTypes.func,\r\n\r\n\tonClick: PropTypes.func,\r\n\tonDoubleClick: PropTypes.func,\r\n\tonContextMenu: PropTypes.func,\r\n\tonMouseDown: PropTypes.func,\r\n\tchildren: PropTypes.node,\r\n};\r\n\r\nEventCapture.defaultProps = {\r\n\tmouseMove: false,\r\n\tzoom: false,\r\n\tpan: false,\r\n\tpanSpeedMultiplier: 1,\r\n\tfocus: false,\r\n\tonDragComplete: noop,\r\n};\r\n\r\nexport default EventCapture;\r\n"]}