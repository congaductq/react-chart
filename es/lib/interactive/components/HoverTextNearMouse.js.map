{"version":3,"sources":["../../../../../src/lib/interactive/components/HoverTextNearMouse.js"],"names":["React","Component","PropTypes","GenericChartComponent","getMouseCanvas","isDefined","hexToRGBA","PADDING","HoverTextNearMouse","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","fontFamily","fontSize","fill","bgFill","bgOpacity","textMetaData","helper","rect","text","strokeStyle","fillStyle","beginPath","x","y","width","height","stroke","font","fillText","propTypes","string","isRequired","number","bgWidth","bgHeight","show","bool","defaultProps","mouseXY","chartConfig","mouseInsideCanvas","cx","cy"],"mappings":"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","file":"HoverTextNearMouse.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport GenericChartComponent from \"../../GenericChartComponent\";\r\nimport { getMouseCanvas } from \"../../GenericComponent\";\r\nimport { isDefined, hexToRGBA } from \"../../utils\";\r\n\r\nconst PADDING = 10;\r\n\r\nclass HoverTextNearMouse extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t}\r\n\tdrawOnCanvas(ctx, moreProps) {\r\n\t\tconst {\r\n\t\t\tfontFamily,\r\n\t\t\tfontSize,\r\n\t\t\tfill,\r\n\t\t\tbgFill,\r\n\t\t\tbgOpacity,\r\n\t\t} = this.props;\r\n\r\n\t\t// console.log(moreProps)\r\n\t\tconst textMetaData = helper(this.props, moreProps);\r\n\r\n\t\tif (isDefined(textMetaData)) {\r\n\t\t\tconst { rect, text } = textMetaData;\r\n\r\n\t\t\tctx.strokeStyle = bgFill;\r\n\t\t\tctx.fillStyle = hexToRGBA(bgFill, bgOpacity);\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.x, rect.y, rect.width, rect.height);\r\n\t\t\tctx.fill();\r\n\t\t\tctx.stroke();\r\n\r\n\t\t\tctx.font = `${ fontSize }px ${fontFamily}`;\r\n\t\t\tctx.fillStyle = fill;\r\n\t\t\tctx.beginPath();\r\n\r\n\t\t\tctx.fillText(text.text, text.x, text.y);\r\n\t\t}\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst {\r\n\t\t\tfontFamily,\r\n\t\t\tfontSize,\r\n\t\t\tfill,\r\n\t\t\tbgFill,\r\n\t\t\tbgOpacity,\r\n\t\t} = this.props;\r\n\r\n\t\t// console.log(moreProps)\r\n\t\tconst textMetaData = helper(this.props, moreProps);\r\n\r\n\t\tif (isDefined(textMetaData)) {\r\n\t\t\tconst { rect, text } = textMetaData;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<rect\r\n\t\t\t\t\t\tfill={bgFill}\r\n\t\t\t\t\t\tfillOpacity={bgOpacity}\r\n\t\t\t\t\t\tstroke={bgFill}\r\n\t\t\t\t\t\t{...rect}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\t\tfontFamily={fontFamily}\r\n\t\t\t\t\t\ttextAnchor=\"start\"\r\n\t\t\t\t\t\tfill={fill}\r\n\t\t\t\t\t\tx={text.x}\r\n\t\t\t\t\t\ty={text.y}>{text.text}</text>\r\n\t\t\t\t</g>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\r\n\t\treturn <GenericChartComponent foo\r\n\r\n\t\t\tsvgDraw={this.renderSVG}\r\n\r\n\t\t\tcanvasToDraw={getMouseCanvas}\r\n\t\t\tcanvasDraw={this.drawOnCanvas}\r\n\r\n\t\t\tdrawOn={[\"mousemove\"]}\r\n\t\t/>;\r\n\t}\r\n}\r\n\r\nHoverTextNearMouse.propTypes = {\r\n\tfontFamily: PropTypes.string.isRequired,\r\n\tfontSize: PropTypes.number.isRequired,\r\n\tfill: PropTypes.string.isRequired,\r\n\ttext: PropTypes.string.isRequired,\r\n\tbgFill: PropTypes.string.isRequired,\r\n\tbgOpacity: PropTypes.number.isRequired,\r\n\tbgWidth: PropTypes.number.isRequired,\r\n\tbgHeight: PropTypes.number.isRequired,\r\n\tshow: PropTypes.bool.isRequired,\r\n};\r\n\r\nHoverTextNearMouse.defaultProps = {\r\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\tfontSize: 12,\r\n\tfill: \"#000000\",\r\n\tbgFill: \"#FA9325\",\r\n\tbgOpacity: 0.5,\r\n};\r\n\r\nfunction helper(props, moreProps) {\r\n\tconst {\r\n\t\tshow,\r\n\t\tfontSize,\r\n\t\tbgWidth,\r\n\t\tbgHeight,\r\n\t} = props;\r\n\r\n\tconst {\r\n\t\tmouseXY,\r\n\t\tchartConfig: { height, width },\r\n\t\tshow: mouseInsideCanvas\r\n\t} = moreProps;\r\n\r\n\tif (show && mouseInsideCanvas) {\r\n\t\tconst [x, y] = mouseXY;\r\n\r\n\t\tconst cx = x < width / 2\r\n\t\t\t? x + PADDING\r\n\t\t\t: x - bgWidth - PADDING;\r\n\t\tconst cy = y < height / 2\r\n\t\t\t? y + PADDING\r\n\t\t\t: y - bgHeight - PADDING;\r\n\r\n\t\tconst rect = {\r\n\t\t\tx: cx,\r\n\t\t\ty: cy,\r\n\t\t\twidth: bgWidth,\r\n\t\t\theight: bgHeight,\r\n\t\t};\r\n\t\tconst text = {\r\n\t\t\ttext: props.text,\r\n\t\t\tx: cx + PADDING / 2,\r\n\t\t\ty: cy + fontSize\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\trect,\r\n\t\t\ttext\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport default HoverTextNearMouse;\r\n"]}