{"version":3,"sources":["../../../../../src/lib/interactive/wrapper/EachTrendLine.js"],"names":["React","Component","PropTypes","ascending","d3Ascending","noop","strokeDashTypes","saveNodeType","isHover","getXValue","StraightLine","ClickableCircle","HoverTextNearMouse","EachTrendLine","props","handleEdge1Drag","bind","handleEdge2Drag","handleLineDragStart","handleLineDrag","handleEdge1DragStart","handleEdge2DragStart","handleDragComplete","handleHover","nodes","state","hover","x1Value","y1Value","x2Value","y2Value","dragStart","moreProps","index","onDrag","xScale","yScale","chartConfig","xAccessor","fullData","startPos","mouseXY","x1","y1","x2","y2","dx","dy","newX1Value","newY1Value","invert","newX2Value","newY2Value","setState","anchor","undefined","onDragComplete","getNewXY","hovering","type","stroke","strokeWidth","strokeOpacity","strokeDasharray","r","edgeStrokeWidth","edgeFill","fill","fillOpacity","edgeStroke","edgeInteractiveCursor","lineInteractiveCursor","hoverText","selected","hoverTextEnabled","enable","restHoverTextProps","plotData","mouseY","x","domain","slice","sort","small","big","y","newY","Math","min","max","propTypes","any","isRequired","number","oneOf","func","onEdge1Drag","onEdge2Drag","onSelect","onUnSelect","defaultClassName","string","bool","object","defaultProps"],"mappings":"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","file":"EachTrendLine.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { ascending as d3Ascending } from \"d3-array\";\r\nimport { noop, strokeDashTypes } from \"../../utils\";\r\nimport { saveNodeType, isHover } from \"../utils\";\r\nimport { getXValue } from \"../../utils/ChartDataUtil\";\r\n\r\nimport StraightLine from \"../components/StraightLine\";\r\nimport ClickableCircle from \"../components/ClickableCircle\";\r\nimport HoverTextNearMouse from \"../components/HoverTextNearMouse\";\r\n\r\nclass EachTrendLine extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.handleEdge1Drag = this.handleEdge1Drag.bind(this);\r\n\t\tthis.handleEdge2Drag = this.handleEdge2Drag.bind(this);\r\n\t\tthis.handleLineDragStart = this.handleLineDragStart.bind(this);\r\n\t\tthis.handleLineDrag = this.handleLineDrag.bind(this);\r\n\r\n\t\tthis.handleEdge1DragStart = this.handleEdge1DragStart.bind(this);\r\n\t\tthis.handleEdge2DragStart = this.handleEdge2DragStart.bind(this);\r\n\r\n\t\tthis.handleDragComplete = this.handleDragComplete.bind(this);\r\n\r\n\t\tthis.handleHover = this.handleHover.bind(this);\r\n\r\n\t\tthis.isHover = isHover.bind(this);\r\n\t\tthis.saveNodeType = saveNodeType.bind(this);\r\n\t\tthis.nodes = {};\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t};\r\n\t}\r\n\thandleLineDragStart() {\r\n\t\tconst {\r\n\t\t\tx1Value, y1Value,\r\n\t\t\tx2Value, y2Value,\r\n\t\t} = this.props;\r\n\r\n\t\tthis.dragStart = {\r\n\t\t\tx1Value, y1Value,\r\n\t\t\tx2Value, y2Value,\r\n\t\t};\r\n\t}\r\n\thandleLineDrag(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\r\n\t\tconst {\r\n\t\t\tx1Value, y1Value,\r\n\t\t\tx2Value, y2Value,\r\n\t\t} = this.dragStart;\r\n\r\n\t\tconst { xScale, chartConfig: { yScale }, xAccessor, fullData } = moreProps;\r\n\t\tconst { startPos, mouseXY } = moreProps;\r\n\r\n\t\tconst x1 = xScale(x1Value);\r\n\t\tconst y1 = yScale(y1Value);\r\n\t\tconst x2 = xScale(x2Value);\r\n\t\tconst y2 = yScale(y2Value);\r\n\r\n\t\tconst dx = startPos[0] - mouseXY[0];\r\n\t\tconst dy = startPos[1] - mouseXY[1];\r\n\r\n\t\tconst newX1Value = getXValue(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\r\n\t\tconst newY1Value = yScale.invert(y1 - dy);\r\n\t\tconst newX2Value = getXValue(xScale, xAccessor, [x2 - dx, y2 - dy], fullData);\r\n\t\tconst newY2Value = yScale.invert(y2 - dy);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tx1Value: newX1Value,\r\n\t\t\ty1Value: newY1Value,\r\n\t\t\tx2Value: newX2Value,\r\n\t\t\ty2Value: newY2Value,\r\n\t\t});\r\n\t}\r\n\thandleEdge1DragStart() {\r\n\t\tthis.setState({\r\n\t\t\tanchor: \"edge2\"\r\n\t\t});\r\n\t}\r\n\thandleEdge2DragStart() {\r\n\t\tthis.setState({\r\n\t\t\tanchor: \"edge1\"\r\n\t\t});\r\n\t}\r\n\thandleDragComplete(...rest) {\r\n\t\tthis.setState({\r\n\t\t\tanchor: undefined\r\n\t\t});\r\n\t\tthis.props.onDragComplete(...rest);\r\n\t}\r\n\thandleEdge1Drag(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\t\tconst {\r\n\t\t\tx2Value, y2Value,\r\n\t\t} = this.props;\r\n\r\n\t\tconst [x1Value, y1Value] = getNewXY(moreProps);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tx1Value,\r\n\t\t\ty1Value,\r\n\t\t\tx2Value,\r\n\t\t\ty2Value,\r\n\t\t});\r\n\t}\r\n\thandleEdge2Drag(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\t\tconst {\r\n\t\t\tx1Value, y1Value,\r\n\t\t} = this.props;\r\n\r\n\t\tconst [x2Value, y2Value] = getNewXY(moreProps);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tx1Value,\r\n\t\t\ty1Value,\r\n\t\t\tx2Value,\r\n\t\t\ty2Value,\r\n\t\t});\r\n\t}\r\n\thandleHover(moreProps) {\r\n\t\tif (this.state.hover !== moreProps.hovering) {\r\n\t\t\tthis.setState({\r\n\t\t\t\thover: moreProps.hovering\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tx1Value,\r\n\t\t\ty1Value,\r\n\t\t\tx2Value,\r\n\t\t\ty2Value,\r\n\t\t\ttype,\r\n\t\t\tstroke,\r\n\t\t\tstrokeWidth,\r\n\t\t\tstrokeOpacity,\r\n\t\t\tstrokeDasharray,\r\n\t\t\tr,\r\n\t\t\tedgeStrokeWidth,\r\n\t\t\tedgeFill,\r\n\t\t\tfill,\r\n\t\t\tfillOpacity,\r\n\t\t\tedgeStroke,\r\n\t\t\tedgeInteractiveCursor,\r\n\t\t\tlineInteractiveCursor,\r\n\t\t\thoverText,\r\n\t\t\tselected,\r\n\r\n\t\t\tonDragComplete,\r\n\t\t} = this.props;\r\n\t\tconst { hover, anchor } = this.state;\r\n\t\t// console.log(\"SELECTED ->\", selected);\r\n\t\tconst { enable: hoverTextEnabled, ...restHoverTextProps } = hoverText;\r\n\r\n\t\treturn <g>\r\n\t\t\t<StraightLine\r\n\t\t\t\tref={this.saveNodeType(\"line\")}\r\n\t\t\t\tselected={selected || hover}\r\n\t\t\t\tonHover={this.handleHover}\r\n\t\t\t\tonUnHover={this.handleHover}\r\n\t\t\t\tx1Value={x1Value}\r\n\t\t\t\ty1Value={y1Value}\r\n\t\t\t\tx2Value={x2Value}\r\n\t\t\t\ty2Value={y2Value}\r\n\t\t\t\ttype={type}\r\n\t\t\t\tstroke={stroke}\r\n\t\t\t\tfill={fill}\r\n\t\t\t\tfillOpacity={fillOpacity}\r\n\t\t\t\tstrokeWidth={(hover || selected) ? strokeWidth + 1 : strokeWidth}\r\n\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\t\tstrokeDasharray={strokeDasharray}\r\n\t\t\t\tinteractiveCursorClass={lineInteractiveCursor}\r\n\t\t\t\tonDragStart={this.handleLineDragStart}\r\n\t\t\t\tonDrag={this.handleLineDrag}\r\n\t\t\t\tonDragComplete={onDragComplete} />\r\n\t\t\t<ClickableCircle\r\n\t\t\t\tref={this.saveNodeType(\"edge1\")}\r\n\t\t\t\tshow={selected || hover}\r\n\t\t\t\tcx={x1Value}\r\n\t\t\t\tcy={y1Value}\r\n\t\t\t\tr={r}\r\n\t\t\t\tfill={edgeFill}\r\n\t\t\t\tstroke={anchor === \"edge1\" ? stroke : edgeStroke}\r\n\t\t\t\tstrokeWidth={edgeStrokeWidth}\r\n\t\t\t\tstrokeOpacity={1}\r\n\t\t\t\tinteractiveCursorClass={edgeInteractiveCursor}\r\n\t\t\t\tonDragStart={this.handleEdge1DragStart}\r\n\t\t\t\tonDrag={this.handleEdge1Drag}\r\n\t\t\t\tonDragComplete={this.handleDragComplete} />\r\n\t\t\t<ClickableCircle\r\n\t\t\t\tref={this.saveNodeType(\"edge2\")}\r\n\t\t\t\tshow={selected || hover}\r\n\t\t\t\tcx={x2Value}\r\n\t\t\t\tcy={y2Value}\r\n\t\t\t\tr={r}\r\n\t\t\t\tfill={edgeFill}\r\n\t\t\t\tstroke={anchor === \"edge2\" ? stroke : edgeStroke}\r\n\t\t\t\tstrokeWidth={edgeStrokeWidth}\r\n\t\t\t\tstrokeOpacity={1}\r\n\t\t\t\tinteractiveCursorClass={edgeInteractiveCursor}\r\n\t\t\t\tonDragStart={this.handleEdge2DragStart}\r\n\t\t\t\tonDrag={this.handleEdge2Drag}\r\n\t\t\t\tonDragComplete={this.handleDragComplete} />\r\n\t\t\t<HoverTextNearMouse\r\n\t\t\t\tshow={hoverTextEnabled && hover && !selected}\r\n\t\t\t\t{...restHoverTextProps} />\r\n\t\t</g>;\r\n\t}\r\n}\r\n\r\nexport function getNewXY(moreProps) {\r\n\tconst { xScale, chartConfig: { yScale }, xAccessor, plotData, mouseXY } = moreProps;\r\n\tconst mouseY = mouseXY[1];\r\n\r\n\tconst x = getXValue(xScale, xAccessor, mouseXY, plotData);\r\n\r\n\tconst [small, big] = yScale.domain().slice().sort(d3Ascending);\r\n\tconst y = yScale.invert(mouseY);\r\n\tconst newY = Math.min(Math.max(y, small), big);\r\n\treturn [x, newY];\r\n}\r\n\r\nEachTrendLine.propTypes = {\r\n\tx1Value: PropTypes.any.isRequired,\r\n\tx2Value: PropTypes.any.isRequired,\r\n\ty1Value: PropTypes.any.isRequired,\r\n\ty2Value: PropTypes.any.isRequired,\r\n\r\n\tindex: PropTypes.number,\r\n\r\n\ttype: PropTypes.oneOf([\r\n\t\t\"XLINE\", // extends from -Infinity to +Infinity\r\n\t\t\"RAY\", // extends to +/-Infinity in one direction\r\n\t\t\"LINE\", // extends between the set bounds\r\n\t\t\"ARROW\", // arrow\r\n\t\t\"SELECT\", // select area\r\n\t]).isRequired,\r\n\r\n\tonDrag: PropTypes.func.isRequired,\r\n\tonEdge1Drag: PropTypes.func.isRequired,\r\n\tonEdge2Drag: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n\tonSelect: PropTypes.func.isRequired,\r\n\tonUnSelect: PropTypes.func.isRequired,\r\n\r\n\tr: PropTypes.number.isRequired,\r\n\tstrokeOpacity: PropTypes.number.isRequired,\r\n\tdefaultClassName: PropTypes.string,\r\n\r\n\tselected: PropTypes.bool,\r\n\r\n\tstroke: PropTypes.string.isRequired,\r\n\tstrokeWidth: PropTypes.number.isRequired,\r\n\tstrokeDasharray: PropTypes.oneOf(strokeDashTypes),\r\n\r\n\tedgeStrokeWidth: PropTypes.number.isRequired,\r\n\tedgeStroke: PropTypes.string.isRequired,\r\n\tedgeInteractiveCursor: PropTypes.string.isRequired,\r\n\tlineInteractiveCursor: PropTypes.string.isRequired,\r\n\tedgeFill: PropTypes.string.isRequired,\r\n\thoverText: PropTypes.object.isRequired,\r\n\tfill: PropTypes.string.isRequired,\r\n\tfillOpacity: PropTypes.number.isRequired,\r\n};\r\n\r\nEachTrendLine.defaultProps = {\r\n\tonDrag: noop,\r\n\tonEdge1Drag: noop,\r\n\tonEdge2Drag: noop,\r\n\tonDragComplete: noop,\r\n\tonSelect: noop,\r\n\tonUnSelect: noop,\r\n\r\n\tselected: false,\r\n\r\n\tedgeStroke: \"#000000\",\r\n\tedgeFill: \"#FFFFFF\",\r\n\tfill: \"#8AAFE2\",\r\n\tfillOpacity: 0.5,\r\n\tedgeStrokeWidth: 2,\r\n\tr: 5,\r\n\tstrokeWidth: 1,\r\n\tstrokeOpacity: 0.7,\r\n\tstrokeDasharray: \"Solid\",\r\n\thoverText: {\r\n\t\tenable: false,\r\n\t}\r\n};\r\n\r\nexport default EachTrendLine;"]}